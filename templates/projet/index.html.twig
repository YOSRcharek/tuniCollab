    
    
    
    
    
    <style>
  
        
        .openBtn {
          display: flex;
          justify-content: left;
        }
        .openButton {
          border: none;
          border-radius: 5px;
          background-color: #1c87c9;
          color: white;
          padding: 14px 20px;
          cursor: pointer;
          position: fixed;
        }
        .loginPopup {
          position: relative;
          text-align: center;
          width: 100%;
        }
  
          .formPopupProject {
              display: none;
              position: fixed;
              left: 50%; /* Position horizontale au centre */
              top: 50%; /* Position verticale au centre */
               z-index: 9;
               transform: translate(-30%, -40%); 
               cursor: move;
            }
            .DetailPopupProject {
                display: none;
                position: fixed;
                left: 50%; /* Position horizontale au centre */
                top: 50%; /* Position verticale au centre */
                 z-index: 9;
                 transform: translate(-40%, -30%); 
              }
              .editPopupProject {
                display: none;
                position: fixed;
                left: 50%; /* Position horizontale au centre */
                top: 50%; /* Position verticale au centre */
                 z-index: 9;
                 transform: translate(-40%, -30%); 
              }
            .overlayProject {
              display: none;
              position: fixed;
              top: 0;
              left: 0;
              width: 100%;
              height: 100%;
              background-color: rgba(0, 0, 0, 0.5); /* Gris semi-transparent */
              z-index: 8; /* Doit être inférieur au z-index du popup */
            }
            
      
        .formContainer {
          max-width: 300px;
          padding: 20px;
          background-color: #fff;
        }
        .formContainer input[type=text],
        .formContainer input[type=password] {
          width: 100%;
          padding: 15px;
          margin: 5px 0 20px 0;
          border: none;
          background: #eee;
        }
        .formContainer input[type=text]:focus,
        .formContainer input[type=password]:focus {
          background-color: #ddd;
          outline: none;
        }
        .formContainer .btn {
          padding: 12px 20px;
          border: none;
          background-color: #8ebf42;
          color: #fff;
          cursor: pointer;
          width: 100%;
          margin-bottom: 15px;
          opacity: 0.8;
        }
        .formContainer .cancel {
          background-color: #cc0000;
        }
     
      </style>
       
      <script>
        function openFormProject() {
            document.getElementById("popupFormProject").style.display = "block";
            document.getElementById("overlayProject").style.display = "block"; // Afficher l'overlayProject
        }
        function submitFormIfValid() {
            if (document.getElementById('newProjectForm').checkValidity()) {
                document.getElementById('newProjectForm').submit(); // Soumettre le formulaire si valide
            }
        }
          function closeFormProject() {
            document.getElementById("popupFormProject").style.display = "none";
            document.getElementById("overlayProject").style.display = "none"; // Masquer l'overlayProject
          }
          function openEditProject() {
            document.getElementById("popupEditProject").style.display = "block";
            document.getElementById("overlayProject").style.display = "block"; // Afficher l'overlayProject
        }
        
          function closeEditProject() {
            document.getElementById("popupEditProject").style.display = "none";
            document.getElementById("overlayProject").style.display = "none"; // Masquer l'overlayProject
          } 
            function openDetailProject(nomProjet, description) {
                // Mettre à jour le contenu de la popup avec les détails du projet
                document.getElementById("projectName").innerText = nomProjet;
                document.getElementById("projectDescription").innerText = description;
                // Afficher la popup
                document.getElementById("popupDetailProject").style.display = "block";
                document.getElementById("overlayProject").style.display = "block"; // Afficher l'overlayProject
           
            }
        
            function closeDetailProject() {
                // Cacher la popup
                document.getElementById("popupDetailProject").style.display = "none";
            document.getElementById("overlayProject").style.display = "none"; // Masquer l'overlayProject
                 
            }
        </script>
    
   
 <body>

<div class="overlayProject" id="overlayProject"></div>
    <div class="tab-pane active show" id="projects-tab" role="tabpanel">
        <div class="">
            <div class="row mb-3">
                <div class="col">
                    <h5 class="mb-3">Projects</h5>
                </div>
                
                <div class="col text-end">
                    <button class="custom-btn" onclick="window.location='{{ path('app_create_projetFront')}}'">+ New Project</button>
<div aria-hidden="true">
                    
                    <div class="addProjectPopUP">
                        <div class="formPopupProject" id="popupFormProject">
                        
                            <div class="col-lg-6 col-12">
                            <form class="custom-form volunteer-form mb-5 mb-lg-0" action="{{ path('app_profil', {'id':ID}) }}" method="post" role="form">
        
                                <button type="button" class="btn-close" onclick="closeFormProject()"></button>

                                    <h2 class="mb-4">New Project</h2>
                                    <div class="row ">
                                    {{ form_start(form2, {'attr': {'class': 'custom-form volunteer-form mb-5 mb-lg-0'}}) }}
                                    
                                        <div class="col-lg-6 col-12">
                                            {{ form_row(form2.nomProjet, {'label': 'Name:', 'placeholder': 'Name', 'attr': {'class': 'form-control '}}) }}
                                       
                                        </div>
                                        <div class="col-lg-6 col-12">
                                            {{ form_row(form2.status, {'label': 'Status:', 'attr': {'class': 'form-control'}}) }}
                                      
                                        
                                        </div>
                                        {{ form_row(form2.description, {'label': 'Description:', 'placeholder': 'Description', 'attr': {'class': 'form-control'}}) }}
                                   
                                    
                                        <div class="col-lg-6 col-12">
                                            <label for="dateDebut">From:</label>
                                            {{ form_widget(form2.dateDebut, {'id': 'dateDebut', 'placeholder': 'Start Date', 'attr': {'class': 'form-control'}}) }}
                                            {% if form_errors(form2.dateDebut) %}
                                                <div class="text-danger">
                                                    {{ form_errors(form2.dateDebut) }}
                                                </div>
                                            {% endif %}
                                        </div>
                                        
                                        <div class="col-lg-6 col-12">
                                            <label for="dateDebut">To:</label>
                                            {{ form_widget(form2.dateFin, {'id': 'dateFIN', 'placeholder': 'End Date', 'attr': {'class': 'form-control'}}) }}
                                            {% if form_errors(form2.dateFin) %}
                                                <div class="text-danger">
                                                    {{ form_errors(form2.dateFin) }}
                                                </div>
                                            {% endif %}
                                        </div>
                                          {{ form_widget(form.association, {'attr': {'style': 'display: none;'}}) }}
                                            
                                    </div>
                                    <button type="submit" class="form-control">Add Project</button>
                                {{ form_end(form) }}

                                </form>
                            </div>
                        </div>
                    </div>
                    
                </div>
               
            </div>
          
        </div>

        <div class="row" id="all-projects">
            <form class="custom-form search-form" action="#" method="post" role="form">
              <input class="form-control" id="searchInput" type="search" placeholder="Search" aria-label="Search">
        
            <button type="submit" class="form-control">
                <i class="bi-search"></i>
            </button>
            <div><p></p></div>
            <div id="searchResults"></div>

    </form>
              <div id="searchResults"></div>
                <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
               <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.6.0/jquery.min.js"></script>
                
           <script>
    $(document).ready(function () {
        $("#searchInput").on("keyup", function () {
            var query = $(this).val();
            if (query.length === 0) {
                $.ajax({
                    url: "{{ path('search_project_ajax') }}",
                    type: "GET",
                    success: function (response) {
                        var results = response.results;
                        var message = response.message;

                        if (results.length > 0) {
                            $('#all-projects .col-md-6').show(); // Afficher tous les projets
                            $('#searchResults').empty().hide(); // Cacher les résultats de la recherche
                        } else {
                            $('#all-projects .col-md-6').hide(); // Cacher tous les projets
                            $('#searchResults').empty().show().append('<div>No results found.</div>'); // Afficher un message si aucun résultat n'a été trouvé
                        }

                        console.log(message); // Afficher le message dans la console pour le débogage
                    },
                    error: function () {
                        console.error("Une erreur s'est produite lors du traitement de la requête AJAX.");
                    }
                });
            } else {
                $.ajax({
                    url: "{{ path('search_project_ajax') }}",
                    type: "GET",
                    data: { query: query },
                    success: function (response) {
                        var results = response.results;
                        var message = response.message;

                        if (results.length > 0) {
                            $('#all-projects .col-md-6').hide(); // Cacher tous les projets existants
                            $('#searchResults').empty().show(); // Afficher les résultats de la recherche
                            $.each(results, function (i, project) {
                                var editLink = '<a class="dropdown-item" href="/edit-projet/' + project.id + '" type="button">Edit</a>';var deleteLink = '<a class="dropdown-item delete-item" data-bs-toggle="modal" type="button" data-bs-target="#deleteProjetModel' + project.id + '" aria-label="Delete">Delete</a>';
                               
                                var dateDebut = new Date(project.dateDebut);
                                 var dateForme = dateDebut.getFullYear() + '-' + ('0' + (dateDebut.getMonth() + 1)).slice(-2) + '-' + ('0' + dateDebut.getDate()).slice(-2);
                                var projectCard = '<div class="col-md-6" id="project-items-2">' +
                                    '<div class="card">' +
                                    '<div class="card-body">' +
                                    '<div class="d-flex mb-3">' +
                                    '<div class="flex-grow-1 align-items-start">' +
                                    '<div>' +
                                    '<h6 class="mb-0 text-muted">' +
                                    '<i class="mdi mdi-circle-medium text-success fs-3 align-middle"></i>' +
                                    '<span class="team-date">' + dateForme+ '</span>' +
                                    '</h6>' +
                                    '</div>' +
                                    '</div>' +
                                    '<div class="dropdown ms-2">' +
                                    '<a href="#" class="dropdown-toggle font-size-16 text-muted" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">' +
                                    '<i class="mdi mdi-dots-horizontal"></i>' +
                                    '</a>' +
                                    '<div class="dropdown-menu dropdown-menu-end">' +
                                    '<a class="dropdown-item" onclick="openDetailProject(\'' + project.nomProjet + '\', \'' + project.description + '\')" type="button">Detail</a>' +
                                    editLink +
                                    '<div class="dropdown-divider"></div>' +
                                    deleteLink +
                                    '</div>' +
                                    '</div>' +
                                    '</div>' +
                                    '<div class="DetailProjectPopUP">' +
                                    '<div class="DetailPopupProject" id="popupDetailProject">' +
                                    '<div>' +
                                    '<div class="custom-text-box">' +
                                    '<button type="button" class="btn-close" onclick="closeDetailProject()"></button>' +
                                    '<h2 class="mb-2">Detail Project</h2>' +
                                    '<h5 class="mb-3" id="projectName">' + project.nomProjet + '</h5>' +
                                    '<p class="mb-0" id="projectDescription">' + project.description + '</p>' +
                                    '</div>' +
                                    '</div>' +
                                    '</div>' +
                                    '</div>' +
                                    '<div class="mb-4">' +
                                    '<h5 class="mb-1 font-size-17 team-title">' + project.nomProjet + '</h5>' +
                                    '<p class="text-muted mb-0 team-description">' + project.description + '</p>' +
                                    '</div>' +
                                    '<div class="d-flex">' +
                                    '<div class="avatar-group float-start flex-grow-1 task-assigne">' +
                                    '</div>' +
                                    '<div class="align-self-end">' +
                                    '<span class="badge badge-soft-success p-2 team-status">' + project.status + '</span>' +
                                    '</div>' +
                                    '</div>' +
                                    '</div>' +
                                    '</div>' +
                                    '</div>';
                                $('#searchResults').append(projectCard);
                            });
                        }
                         else {
                            $('#all-projects .col-md-6').hide(); // Cacher tous les projets
                            $('#searchResults').empty().show().append('<div>No results found.</div>'); // Afficher un message si aucun résultat n'a été trouvé
                        }

                        console.log(message); // Afficher le message dans la console pour le débogage
                    },
                    error: function () {
                        console.error("Une erreur s'est produite lors du traitement de la requête AJAX.");
                    }
                });
            }
        });
    });
</script>

        
            {% for projet in projets %}
            <div class="col-md-6" id="project-items-2">
                <div class="card">
                    <div class="card-body">
                        <div class="d-flex mb-3">
                            <div class="flex-grow-1 align-items-start">
                                <div>
                                    <h6 class="mb-0 text-muted">
                                        <i class="mdi mdi-circle-medium text-success fs-3 align-middle"></i>
                                        <span class="team-date">{{ projet.dateDebut|date('Y-m-d') }}</span>
                                    </h6>
                                </div>
                            </div>
                            <div class="dropdown ms-2">
                                <a href="#" class="dropdown-toggle font-size-16 text-muted" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                                    <i class="mdi mdi-dots-horizontal"></i>
                                </a>
                                <div class="dropdown-menu dropdown-menu-end">  
                                    <a class="dropdown-item" onclick="openDetailProject('{{ projet.nomProjet }}', '{{ projet.description }}')" type="button">Detail</a>
                                    <a class="dropdown-item" href="{{ path('app_edit_projet', {'id': projet.id}) }}" type="button">Edit</a>
                                     <div class="dropdown-divider"></div>
                                    <a class="dropdown-item delete-item" data-bs-toggle="modal" type='button' data-bs-target="#deleteProjetModel{{ projet.id }}" aria-label="Delete" >Delete</a>
                                
                                </div>
                                
                            </div>
                            <div class="modal fade" id="deleteProjetModel{{ projet.id }}" tabindex="-1" aria-labelledby="deleteProjetModelLabel" aria-hidden="true">
                                <div class="modal-dialog">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="deleteProjetModelLabel">Confirmation de suppression</h5>
                                            <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                                        </div>
                                        <div class="modal-body">
                                            Are you sure do you want to delete this project?
                                    
                                        </div>
                                        <div class="modal-footer">
                                            <button type="button" class="custom-btn" data-bs-dismiss="modal">Annuler</button>
                                            <a href="{{ path('app_delete_projet', {'id': projet.id}) }}" class="custom-btn">Supprimer</a>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        
                        </div>
    
       <div class="DetailProjectPopUP">
        <div class="DetailPopupProject" id="popupDetailProject">
            <div>
                <div class="custom-text-box">
                    <button type="button" class="btn-close" onclick="closeDetailProject()"></button>
                    <h2 class="mb-2">Detail Project</h2>
                    <h5 class="mb-3" id="projectName"></h5>
                    <p class="mb-0" id="projectDescription"></p>
                </div>
            </div>   
        </div>
     </div>
      
      
                    <div class="mb-4">
                        <h5 class="mb-1 font-size-17 team-title">{{projet.nomProjet}}</h5>
                        <p class="text-muted mb-0 team-description">{{projet.description}}</p>
                    </div>
                    <div class="d-flex">
                        <div class="avatar-group float-start flex-grow-1 task-assigne">
                          
                        </div><!-- end avatar group -->
                        <div class="align-self-end">
                            <span class="badge badge-soft-success p-2 team-status">{{projet.status}}</span>
                        </div>
                    </div>
                </div><!-- end cad-body -->
            </div><!-- end card -->
        </div><!-- end col -->
        {% endfor %}
    </div>
</div>
</body>